(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports=n(216)},110:function(e,t,n){},112:function(e,t,n){},123:function(e,t){},125:function(e,t){},158:function(e,t){},159:function(e,t){},216:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"model",function(){return r}),n.d(a,"loadPredictionSuccess",function(){return j}),n.d(a,"predict",function(){return S}),n.d(a,"init",function(){return F});var r,o=n(1),i=n.n(o),s=n(33),c=n.n(s),l=(n(110),n(19)),u=n(20),h=n(24),p=n(21),d=n(23),b=n(34),f=(n(112),function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Draw anything!"))}),g=n(9),v=n(22),m=n(10),k=n.n(m),w=n(25),y="PREDICTION_SUCCESS",_=n(26),O={0:"line",1:"bucket",2:"bus",3:"cello",4:"ocean",5:"truck",6:"camouflage",7:"harp",8:"telephone",9:"stairs",10:"star",11:"guitar",12:"sandwich",13:"sun",14:"feather",15:"leaf",16:"toilet",17:"strawberry",18:"waterslide",19:"bottlecap",20:"coffee_cup",21:"banana",22:"dresser",23:"house_plant",24:"skateboard",25:"skyscraper",26:"pizza",27:"hammer",28:"teapot",29:"giraffe",30:"underwear",31:"snowman",32:"monkey",33:"computer",34:"pencil",35:"shovel",36:"necklace",37:"compass",38:"bat",39:"bicycle",40:"teddy-bear",41:"scorpion",42:"hot_dog",43:"fish",44:"see_saw",45:"rain",46:"snail",47:"sink",48:"belt",49:"speedboat",50:"pants",51:"trombone",52:"crocodile",53:"broccoli",54:"hedgehog",55:"rainbow",56:"fork",57:"bulldozer",58:"sock",59:"snake",60:"paper_clip",61:"bear",62:"marker",63:"birthday_cake",64:"saxophone",65:"rake",66:"stethoscope",67:"broom",68:"crown",69:"square",70:"fire_hydrant",71:"jail",72:"donut",73:"oven",74:"beard",75:"yoga",76:"The_Eiffel_Tower",77:"camera",78:"purse",79:"ice_cream",80:"pig",81:"trumpet",82:"table",83:"bush",84:"rollerskates",85:"goatee",86:"cup",87:"anvil",88:"suitcase",89:"chair",90:"drill",91:"peanut",92:"squirrel",93:"matches",94:"sword",95:"cat",96:"toe",97:"snorkel",98:"pond",99:"calculator",100:"airplane",101:"squiggle",102:"blackberry",103:"ear",104:"frying_pan",105:"chandelier",106:"lollipop",107:"binoculars",108:"garden",109:"basket",110:"penguin",111:"washing_machine",112:"canoe",113:"screwdriver",114:"beach",115:"eyeglasses",116:"mouse",117:"apple",118:"van",119:"grapes",120:"grass",121:"watermelon",122:"floor_lamp",123:"moon",124:"zigzag",125:"nail",126:"leg",127:"smiley_face",128:"octagon",129:"dumbbell",130:"sweater",131:"stitches",132:"tractor",133:"foot",134:"helmet",135:"basketball",136:"crab",137:"clock",138:"diamond",139:"car",140:"axe",141:"traffic_light",142:"sleeping_bag",143:"baseball",144:"eye",145:"flower",146:"hot_air_balloon",147:"tree",148:"wine_bottle",149:"hot_tub",150:"peas",151:"door",152:"calendar",153:"wine_glass",154:"stove",155:"hockey_stick",156:"toothpaste",157:"moustache",158:"mountain",159:"tooth",160:"cannon",161:"firetruck",162:"shorts",163:"stereo",164:"cloud",165:"paintbrush",166:"pear",167:"dishwasher",168:"laptop",169:"frog",170:"vase",171:"diving_board",172:"backpack",173:"lobster",174:"golf_club",175:"garden_hose",176:"hexagon",177:"bird",178:"finger",179:"animal_migration",180:"steak",181:"mailbox",182:"shark",183:"television",184:"mermaid",185:"cow",186:"crayon",187:"palm_tree",188:"windmill",189:"cookie",190:"kangaroo",191:"blueberry",192:"tiger",193:"tennis_racquet",194:"dragon",195:"cell_phone",196:"pineapple",197:"candle",198:"sheep",199:"cactus",200:"angel",201:"mosquito",202:"church",203:"couch",204:"The_Great_Wall_of_China",205:"tornado",206:"jacket",207:"nose",208:"octopus",209:"motorbike",210:"bracelet",211:"brain",212:"The_Mona_Lisa",213:"toothbrush",214:"carrot",215:"barn",216:"microphone",217:"zebra",218:"map",219:"camel",220:"wheel",221:"bridge",222:"lighthouse",223:"spreadsheet",224:"hockey_puck",225:"wristwatch",226:"helicopter",227:"swan",228:"flamingo",229:"eraser",230:"bee",231:"flashlight",232:"megaphone",233:"ladder",234:"shoe",235:"asparagus",236:"t-shirt",237:"passport",238:"hand",239:"triangle",240:"lightning",241:"mug",242:"submarine",243:"violin",244:"owl",245:"scissors",246:"baseball_bat",247:"string_bean",248:"lantern",249:"house",250:"elbow",251:"power_outlet",252:"stop_sign",253:"bed",254:"school_bus",255:"hamburger",256:"lipstick",257:"light_bulb",258:"flip_flops",259:"alarm_clock",260:"ant",261:"face",262:"microwave",263:"hourglass",264:"panda",265:"pool",266:"circle",267:"onion",268:"raccoon",269:"bowtie",270:"umbrella",271:"butterfly",272:"fireplace",273:"skull",274:"train",275:"mouth",276:"hat",277:"drums",278:"book",279:"radio",280:"roller_coaster",281:"snowflake",282:"piano",283:"rhinoceros",284:"cake",285:"toaster",286:"paint_can",287:"knee",288:"spider",289:"tent",290:"rabbit",291:"clarinet",292:"whale",293:"boomerang",294:"hospital",295:"ceiling_fan",296:"saw",297:"pillow",298:"fence",299:"dog",300:"duck",301:"parrot",302:"swing_set",303:"spoon",304:"fan",305:"cruise_ship",306:"picture_frame",307:"mushroom",308:"headphones",309:"horse",310:"flying_saucer",311:"lion",312:"postcard",313:"bench",314:"keyboard",315:"parachute",316:"streetlight",317:"arm",318:"police_car",319:"sailboat",320:"cooler",321:"bathtub",322:"campfire",323:"hurricane",324:"soccer_ball",325:"potato",326:"dolphin",327:"key",328:"elephant",329:"sea_turtle",330:"popsicle",331:"envelope",332:"pickup_truck",333:"remote_control",334:"ambulance",335:"pliers",336:"bread",337:"castle",338:"river",339:"bandage"};function j(e){return{type:y,prediction:e}}var S=function(e,t,n){return function(){var a=Object(w.a)(k.a.mark(function a(o){var i,s,c,l,u;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!=r){a.next=2;break}return a.abrupt("return",o(j("model could not be loaded")));case 2:i=_.d(function(){var a=M(e,t,n);return a=_.c(a,[t,n,1]),a=_.a.resizeBilinear(a,[32,32]),a=_.c(a,[1,32,32,1])}),s=r.predict(i),c=s.as1D(),l=c.argMax().dataSync()[0],u=c.dataSync()[l],u=Math.round(1e4*u)/1e4,c.dispose(),o(j(O[l]+", Score: "+u));case 10:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()};function M(e,t,n){var a=new Array(t).fill(0).map(function(e){return new Array(n).fill(0)});return e.forEach(function(e){if(e.length>0)for(var t=e[0],n=null,r=1;r<e.length;r++)n=e[r],a[Math.round(t[0])][Math.round(t[1])]=255,a[Math.round(n[0])][Math.round(n[1])]=255,t=n}),a}function C(e){return x.apply(this,arguments)}function x(){return(x=Object(w.a)(k.a.mark(function e(t){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return(E=Object(w.a)(k.a.mark(function e(t){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.b(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function D(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(w.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",T(t));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var F=function(){return function(){var e=Object(w.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("https://raw.githubusercontent.com/smd-faizan/razorback/development/savedModels/jsModels/model.json");case 2:r=e.sent,t(j("Model is loaded"));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},X=n(42),W=n.n(X),z=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e)))._strokes=[],n._points=[],n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=c.a.findDOMNode(this);e.style.width="100%",e.style.height="100%",e.width=e.offsetWidth,e.height=window.innerHeight-100;var t=e.getContext("2d");this.setState({canvas:e,context:t})}},{key:"componentWillReceiveProps",value:function(e){e.clear&&(this.resetCanvas(),this._strokes=[],this._points=[])}},{key:"handleOnTouchStart",value:function(e){var t=this.state.canvas.getBoundingClientRect();this.state.context.beginPath(),this._points=[[e.targetTouches[0].pageX-t.left,e.targetTouches[0].pageY-t.top]],this.setState({lastX:e.targetTouches[0].pageX-t.left,lastY:e.targetTouches[0].pageY-t.top,drawing:!0})}},{key:"handleOnMouseDown",value:function(e){var t=this.state.canvas.getBoundingClientRect();this.state.context.beginPath(),this._points=[[e.clientX-t.left,e.clientY-t.top]],this.setState({lastX:e.clientX-t.left,lastY:e.clientY-t.top,drawing:!0})}},{key:"handleOnTouchMove",value:function(e){if(this.state.drawing){var t=this.state.canvas.getBoundingClientRect(),n=this.state.lastX,a=this.state.lastY,r=e.targetTouches[0].pageX-t.left,o=e.targetTouches[0].pageY-t.top;this.draw(n,a,r,o),this.setState({lastX:r,lastY:o})}}},{key:"handleOnMouseMove",value:function(e){if(this.state.drawing){var t=this.state.canvas.getBoundingClientRect(),n=this.state.lastX,a=this.state.lastY,r=e.clientX-t.left,o=e.clientY-t.top;this.draw(n,a,r,o),this.setState({lastX:r,lastY:o})}}},{key:"handleonMouseUp",value:function(){this._strokes.push(this._points),this.setState({drawing:!1}),this.props.actions.predict(this._strokes,this.state.canvas.width,this.state.canvas.height)}},{key:"draw",value:function(e,t,n,a){this._points.push([n,a]);var r=this.state.context;r.strokeStyle=this.props.brushColor,r.lineWidth=this.props.lineWidth,this.setState({context:r}),this.state.context.moveTo(e,t),this.state.context.lineTo(n,a),this.state.context.stroke()}},{key:"resetCanvas",value:function(){var e=this.state.context.canvas.width,t=this.state.context.canvas.height;this.state.context.clearRect(0,0,e,t)}},{key:"canvasStyle",value:function(){var e=t.getDefaultStyle(),n=this.props.canvasStyle;return W()({},e,n)}},{key:"render",value:function(){return i.a.createElement("canvas",{style:this.canvasStyle(),onMouseDown:this.handleOnMouseDown.bind(this),onTouchStart:this.handleOnTouchStart.bind(this),onMouseMove:this.handleOnMouseMove.bind(this),onTouchMove:this.handleOnTouchMove.bind(this),onMouseUp:this.handleonMouseUp.bind(this),onTouchEnd:this.handleonMouseUp.bind(this)})}}],[{key:"getDefaultStyle",value:function(){return{brushColor:"#FFFF00",lineWidth:4,cursor:"pointer",canvasStyle:{backgroundColor:"#00FFDC"},clear:!1}}}]),t}(i.a.Component);var B=Object(v.b)(function(e,t){return{}},function(e){return{actions:Object(g.bindActionCreators)(a,e)}})(z),U=n(100),R=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={brushColor:"#000000",lineWidth:3,canvasStyle:{backgroundColor:"#FFFFFF",borderColor:"#786B6B",borderStyle:"solid"},clear:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.init()}},{key:"handleOnClickClear",value:function(){var e=this;this.setState({clear:!0},function(){e.setState({clear:!1})}),this.props.actions.loadPredictionSuccess("Model is loaded")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("label",null,"Predicted class: ",this.props.prediction),i.a.createElement("button",{className:"ui button yellow",onClick:function(){return e.handleOnClickClear()}},"Clear"),i.a.createElement(U.TouchScrollable,null,i.a.createElement(B,this.state)))}}]),t}(i.a.Component);var P=Object(v.b)(function(e,t){return{prediction:e.prediction}},function(e){return{actions:Object(g.bindActionCreators)(a,e)}})(R),A=n(101),q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).onUnload=n.onUnload.bind(Object(b.a)(Object(b.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onUnload",value:function(e){e.returnValue="Your work will be lost."}},{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(f,null),i.a.createElement(P,null),i.a.createElement(A.a,{bottomThreshold:10,normalStyles:{backgroundColor:"#999999",padding:"0.1rem"},stickyStyles:{backgroundColor:"rgba(255,255,255,.8)",padding:"0.1rem"}}," v1.1.0"))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(211);var N={prediction:"Loading model... , please wait"};var I=Object(g.combineReducers)({prediction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.prediction,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.prediction;default:return e}}}),L=n(102),H=n.n(L),J=n(103),G=n(104);var V,$=Object(g.createStore)(I,V,Object(G.composeWithDevTools)(Object(g.applyMiddleware)(J.a,H()())));c.a.render(i.a.createElement(v.a,{store:$},i.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[105,2,1]]]);
//# sourceMappingURL=main.64028a8f.chunk.js.map